# ============================================================================
# BrainKB Unified Deployment - Environment Variables Template
# ============================================================================
# Copy this file to .env and update with your actual values
# cp env.template .env
# ============================================================================

# ----------------------------------------------------------------------------
# PostgreSQL Database Configuration
# ----------------------------------------------------------------------------
# PostgreSQL runs on port 5432 internally, mapped to POSTGRES_PORT on host
# Access from host: localhost:POSTGRES_PORT
# Access from containers: postgres:5432 (service name)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgrespwd
POSTGRES_DB=brainkb
POSTGRES_PORT=5432

# ----------------------------------------------------------------------------
# Database Configuration (for APItokenmanager Django service)
# ----------------------------------------------------------------------------
# IMPORTANT: DB_PASSWORD must match POSTGRES_PASSWORD above
# Access from containers: use DB_HOST=postgres (Docker service name)
DB_NAME=brainkb
DB_USER=postgres
DB_PASSWORD=postgrespwd
DB_HOST=postgres
DB_PORT=5432

# ----------------------------------------------------------------------------
# Django Configuration (APItokenmanager)
# ----------------------------------------------------------------------------
DJANGO_SUPERUSER_USERNAME=admin
DJANGO_SUPERUSER_EMAIL=admin@brainkb.org
DJANGO_SUPERUSER_PASSWORD=your_admin_password_change_this
BRAINYPEDIA_APITOKEN_MANAGER_SECRET_KEY=your-django-secret-key-change-this-in-production

# ----------------------------------------------------------------------------
# JWT Configuration (shared database configuration)
# ----------------------------------------------------------------------------
# IMPORTANT: JWT_POSTGRES_DATABASE_PASSWORD must match POSTGRES_PASSWORD
# These services use these credentials to connect to PostgreSQL
JWT_POSTGRES_DATABASE_HOST_URL=postgres
JWT_POSTGRES_DATABASE_PORT=5432
JWT_POSTGRES_DATABASE_USER=postgres
JWT_POSTGRES_DATABASE_PASSWORD=postgrespwd
JWT_POSTGRES_DATABASE_NAME=brainkb
JWT_POSTGRES_TABLE_USER=Web_jwtuser
JWT_POSTGRES_TABLE_SCOPE=Web_scope
JWT_POSTGRES_TABLE_USER_SCOPE_REL=Web_jwtuser_scopes
JWT_ALGORITHM=HS256

# ----------------------------------------------------------------------------
# Service-Specific JWT Secret Keys (for security isolation)
# ----------------------------------------------------------------------------
# Each service has its own JWT secret key to prevent tokens from one service
# from being used to authenticate with another service
QUERY_SERVICE_JWT_SECRET_KEY=your-query-service-jwt-secret-key-change-this-in-production
ML_SERVICE_JWT_SECRET_KEY=your-ml-service-jwt-secret-key-change-this-in-production
CHAT_SERVICE_JWT_SECRET_KEY=your-chat-service-jwt-secret-key-change-this-in-production
INGESTION_SERVICE_JWT_SECRET_KEY=your-ingestion-service-jwt-secret-key-change-this-in-production
USERMANAGEMENT_SERVICE_JWT_SECRET_KEY=your-usermanagement-service-jwt-secret-key-change-this-in-production

# ----------------------------------------------------------------------------
# Service Ports
# ----------------------------------------------------------------------------
# Port mappings for services (host:container)
# API_TOKEN_PORT: Django API Token Manager - Direct access at http://localhost:API_TOKEN_PORT
API_TOKEN_PORT=8000

# QUERY_SERVICE_PORT: FastAPI Query Service - Direct access at http://localhost:QUERY_SERVICE_PORT
QUERY_SERVICE_PORT=8010

# ML_SERVICE_PORT: FastAPI ML Service - Direct access at http://localhost:ML_SERVICE_PORT
ML_SERVICE_PORT=8007

# OXIGRAPH_PORT: SPARQL Database - Direct access at http://localhost:OXIGRAPH_PORT
OXIGRAPH_PORT=7878

# UI_PORT: Next.js Frontend (if deployed separately) - Direct access at http://localhost:UI_PORT
UI_PORT=3000

# PGADMIN_PORT: PostgreSQL Admin Interface - Access at http://localhost:PGADMIN_PORT
PGADMIN_PORT=5051

# POSTGRES_PORT: PostgreSQL Database - Direct access at localhost:POSTGRES_PORT
POSTGRES_PORT=5432

# ----------------------------------------------------------------------------
# Oxigraph SPARQL Database Configuration
# ----------------------------------------------------------------------------
# Oxigraph is password protected via Nginx HTTP Basic Authentication
# Access at: http://localhost:OXIGRAPH_PORT (requires authentication)
# Username: OXIGRAPH_USER
# Password: OXIGRAPH_PASSWORD
# Note: These credentials are used for HTTP Basic Auth when accessing Oxigraph
OXIGRAPH_USER=admin
OXIGRAPH_PASSWORD=pwdoxigraph

# ----------------------------------------------------------------------------
# Query Service Configuration
# ----------------------------------------------------------------------------
# Query Service runs on port 8010 internally, mapped to QUERY_SERVICE_PORT on host
# Direct access: http://localhost:QUERY_SERVICE_PORT
# IMPORTANT: DATABASE_URL password must match POSTGRES_PASSWORD
ENV_STATE=production
DATABASE_URL=postgresql://postgres:postgrespwd@postgres:5432/brainkb
LOGTAIL_API_KEY=
# IMPORTANT: For services running in Docker (query_service, ml_service):
# - Use 'oxigraph' for direct internal access (no password required, faster) - RECOMMENDED
# - Use 'oxigraph-nginx' to access through password-protected Nginx (if you want authentication)
# For external access from host machine: use 'localhost' with HTTP Basic Auth credentials
# The query service supports HTTP Basic Auth, so it can use either option
GRAPHDATABASE_USERNAME=admin
GRAPHDATABASE_PASSWORD=pwdoxigraph
# Use 'oxigraph' for direct internal access (recommended for services in Docker)
# Use 'oxigraph-nginx' to go through password-protected Nginx
GRAPHDATABASE_HOSTNAME=oxigraph
GRAPHDATABASE_PORT=7878
GRAPHDATABASE_TYPE=OXIGRAPH
GRAPHDATABASE_REPOSITORY=
RAPID_RELEASE_FILE=

# ----------------------------------------------------------------------------
# pgAdmin Configuration (for PostgreSQL management)
# ----------------------------------------------------------------------------
# pgAdmin runs on port 80 internally, mapped to PGADMIN_PORT on host
# Access at: http://localhost:PGADMIN_PORT
# pgAdmin starts automatically with the deployment and auto-configures PostgreSQL connection
PGADMIN_DEFAULT_EMAIL=admin@brainkb.org
PGADMIN_DEFAULT_PASSWORD=your_pgadmin_password_change_this
# Server name that will appear in pgAdmin (optional, defaults to "BrainKB PostgreSQL")
PGADMIN_SERVER_NAME=BrainKB PostgreSQL

# ----------------------------------------------------------------------------
# ML Service Configuration
# ----------------------------------------------------------------------------
# ML Service runs on port 8007 internally, mapped to ML_SERVICE_PORT on host
# Direct access: http://localhost:ML_SERVICE_PORT

# ML Service - Query Service Integration
QUERY_SERVICE_BASE_URL=localhost:8010

# ----------------------------------------------------------------------------
# ML Service - MongoDB Configuration
# ----------------------------------------------------------------------------
MONGO_DB_URL=
NER_DATABASE=ner_database
NER_COLLECTION=ner_collection

# ----------------------------------------------------------------------------
# ML Service - StructSense/KG Source Configuration
# ----------------------------------------------------------------------------
ENABLE_KG_SOURCE=False
ONTOLOGY_DATABASE=ontology_database_agent_test1
WEAVIATE_GRPC_HOST=
WEAVIATE_HTTP_HOST=
WEAVIATE_API_KEY=

# ----------------------------------------------------------------------------
# ML Service - PDF Extraction Configuration
# ----------------------------------------------------------------------------
EXTERNAL_PDF_EXTRACTION_SERVICE=True
GROBID_SERVER_URL_OR_EXTERNAL_SERVICE=http://localhost:8070

# ----------------------------------------------------------------------------
# ML Service - Ollama Configuration
# ----------------------------------------------------------------------------
# Use http://host.docker.internal:11434 when running ollama via docker
# Use http://localhost:11434 when running ollama on host
OLLAMA_API_ENDPOINT=http://host.docker.internal:11434
OLLAMA_MODEL=nomic-embed-text

# ----------------------------------------------------------------------------
# RabbitMQ Configuration (for ML Service and Ingestion Services)
# ----------------------------------------------------------------------------
# RabbitMQ connection settings for services that use message queues
# For services running in Docker: use RABBITMQ_URL=rabbitmq (service name)
# For services running on host: use RABBITMQ_URL=localhost
RABBITMQ_USERNAME=guest
RABBITMQ_PASSWORD=guest
RABBITMQ_URL=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_VHOST=/
RABBITMQ_MGMT_PORT=15672
# For RabbitMQ docker-compose (rabbit-mq/docker-compose.yml)
# These should match RABBITMQ_USERNAME and RABBITMQ_PASSWORD above
RABBITMQ_DEFAULT_USER=guest
RABBITMQ_DEFAULT_PASS=guest

# ----------------------------------------------------------------------------
# Chat Service Configuration
# ----------------------------------------------------------------------------
# Chat Service runs on port 8011 internally (if deployed separately)
# Direct access: http://localhost:8011
# Query Service URL for chat service to connect to
QUERY_URL=localhost:8010
# OpenRouter API Configuration (for LLM integration)
OPENROUTER_API_KEY=
OPENROUTER_MODEL=openai/gpt-4
OPENROUTER_API_URL=https://openrouter.ai/api/v1/chat/completions
# JWT Authentication for Chat Service
JWT_BEARER_TOKEN_URL=
JWT_LOGIN_EMAIL=
JWT_LOGIN_PASSWORD=

# ----------------------------------------------------------------------------
# Ingestion Service Configuration
# ----------------------------------------------------------------------------
# Ingestion Worker - URL endpoint for ingestion operations
INGEST_URL=